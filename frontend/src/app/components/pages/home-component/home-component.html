<div class="min-h-full w-full bg-slate-50 p-4 sm:p-8">
  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
    <div>
      <h1 class="text-3xl font-bold text-slate-900 tracking-tight">Monitor Dashboard</h1>
      <p class="text-slate-500 mt-1">Gerencie a saúde dos seus serviços em tempo real.</p>
    </div>

    <div class="flex gap-3">
      <app-button-component
        label="Novo monitor"
        (onAction)="handleNavigation('/monitor/new')"
      ></app-button-component>
      <app-button-component
        variant="secondary"
        label="Ver todos"
        (onAction)="handleNavigation('/monitor/all')"
      ></app-button-component>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
    <div
      class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 relative overflow-hidden group"
    >
      <div class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
        <svg class="w-24 h-24 text-indigo-600" fill="currentColor" viewBox="0 0 24 24">
          <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
        </svg>
      </div>
      <p class="text-sm font-medium text-slate-500 uppercase tracking-wider">Total de Monitores</p>
      <div class="mt-2 flex items-baseline gap-2">
        <span class="text-4xl font-extrabold text-slate-900">{{ totalCount() }}</span>
        <span class="text-sm text-slate-400">serviços</span>
      </div>
    </div>

    <div
      class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 border-l-4 border-l-emerald-500"
    >
      <p class="text-sm text-emerald-600 uppercase tracking-wider font-bold">Ativos</p>
      <p class="mt-2 text-4xl font-extrabold text-slate-900">{{ activeMonitor().length }}</p>
    </div>

    <div
      class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 border-l-4 border-l-rose-500"
    >
      <p class="text-sm text-rose-600 uppercase tracking-wider font-bold">Inativos</p>
      <p class="mt-2 text-4xl font-extrabold text-slate-900">{{ deactivedMonitors().length }}</p>
    </div>
  </div>

  <h2 class="text-lg font-semibold text-slate-800 mb-4 px-1">Status dos Serviços</h2>

  <div class="flex flex-col gap-4">
    @for (monitor of dataMonitor.value(); track monitor.id) {
    <div
      class="group bg-white rounded-lg border border-slate-200 p-5 hover:shadow-md hover:border-indigo-300 transition-all duration-200 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"
    >
      <div class="flex items-start gap-4 flex-1">
        <div class="mt-1 shrink-0">
          @if (monitor.status === 200) {
          <span class="relative flex h-3 w-3">
            <span
              class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"
            ></span>
            <span class="relative inline-flex rounded-full h-3 w-3 bg-emerald-500"></span>
          </span>
          } @else {
          <span class="relative flex h-3 w-3">
            <span class="relative inline-flex rounded-full h-3 w-3 bg-rose-500"></span>
          </span>
          }
        </div>

        <div class="flex flex-col">
          <div class="flex items-center gap-2">
            <h3
              class="text-lg font-bold text-slate-800 group-hover:text-indigo-600 transition-colors"
            >
              {{ monitor.name }}
            </h3>
            <span
              [class]="
                monitor.status === 200
                  ? 'bg-emerald-100 text-emerald-700'
                  : 'bg-rose-100 text-rose-700'
              "
              class="px-2 py-0.5 rounded text-xs font-bold"
            >
              {{ monitor.status }}
            </span>
          </div>

          <a
            [href]="monitor.url"
            target="_blank"
            class="text-sm text-slate-500 hover:text-indigo-500 hover:underline truncate max-w-md"
          >
            {{ monitor.url }}
          </a>

          @if(monitor.description) {
          <p class="text-sm text-slate-400 mt-1 line-clamp-1">{{ monitor.description }}</p>
          }
        </div>
      </div>

      <div
        class="flex items-center gap-4 border-t sm:border-t-0 sm:border-l border-slate-100 pt-3 sm:pt-0 sm:pl-4 w-full sm:w-auto"
      >
        <span class="text-xs text-slate-400 font-mono">ID: {{ monitor.id }}</span>
      </div>
    </div>
    }
  </div>
</div>
